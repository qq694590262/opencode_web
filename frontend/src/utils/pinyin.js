// 汉字转拼音首字母映射表
const pinyinMap = {
  '一': 'Y', '二': 'E', '三': 'S', '四': 'S', '五': 'W', '六': 'L', '七': 'Q', '八': 'B', '九': 'J', '十': 'S',
  '用': 'Y', '户': 'H', '管': 'G', '理': 'L', '列': 'L', '表': 'B', '权': 'Q', '限': 'X', '日': 'R', '志': 'Z',
  '项': 'X', '目': 'M', '任': 'R', '务': 'W', '文': 'W', '档': 'D', '中': 'Z', '心': 'X', '知': 'Z', '识': 'S',
  '库': 'K', '设': 'S', '置': 'Z', '个': 'G', '人': 'R', '信': 'X', '息': 'X', '偏': 'P', '好': 'H', '系': 'X',
  '统': 'T', '配': 'P', '数': 'S', '据': 'J', '分': 'F', '析': 'X', '概': 'G', '览': 'L', '报': 'B', '图': 'T',
  '盘': 'P', '仪': 'Y', '表': 'B', '监': 'J', '控': 'K', '操': 'C', '作': 'Z', '记': 'J', '录': 'L', '角': 'J',
  '色': 'S', '安': 'A', '全': 'Q', '程': 'C', '日': 'R', '历': 'L', '提': 'T', '醒': 'X', '组': 'Z', '织': 'Z',
  '部': 'B', '门': 'M', '团': 'T', '队': 'D', '消': 'X', '息': 'X', '通': 'T', '知': 'Z', '帮': 'B', '助': 'Z',
  '退': 'T', '出': 'C', '登': 'D', '录': 'L', '主': 'Z', '页': 'Y', '仪': 'Y', '表': 'B', '板': 'B', '总': 'Z',
  '览': 'L', '编': 'B', '辑': 'J', '删': 'S', '除': 'C', '新': 'X', '建': 'J', '导': 'D', '入': 'R', '导': 'D',
  '出': 'C', '搜': 'S', '索': 'S', '查': 'C', '找': 'Z', '筛': 'S', '选': 'X', '排': 'P', '序': 'X', '详': 'X',
  '情': 'Q', '预': 'Y', '览': 'L', '下': 'X', '载': 'Z', '上': 'S', '传': 'C', '分': 'F', '享': 'X', '收': 'S',
  '藏': 'C', '标': 'B', '签': 'Q', '归': 'G', '档': 'D', '移': 'Y', '动': 'D', '复': 'F', '制': 'Z', '粘': 'Z',
  '贴': 'T', '撤': 'C', '销': 'X', '重': 'C', '做': 'Z', '保': 'B', '存': 'C', '更': 'G', '新': 'X', '修': 'X',
  '改': 'G', '添': 'T', '加': 'J', '创': 'C', '建': 'J', '取': 'Q', '消': 'X', '确': 'Q', '定': 'D', '关': 'G',
  '闭': 'B', '打': 'D', '开': 'K', '展': 'Z', '开': 'K', '收': 'S', '起': 'Q', '折': 'Z', '叠': 'D', '全': 'Q',
  '屏': 'P', '放': 'F', '大': 'D', '缩': 'S', '小': 'X', '还': 'H', '原': 'Y', '刷': 'S', '新': 'X', '清': 'Q',
  '空': 'K', '重': 'Z', '启': 'Q', '停': 'T', '止': 'Z', '开': 'K', '始': 'S', '继': 'J', '续': 'X', '暂': 'Z',
  '停': 'T', '恢': 'H', '复': 'F', '备': 'B', '份': 'F', '还': 'H', '原': 'Y', '迁': 'Q', '移': 'Y', '升': 'S',
  '级': 'J', '降': 'J', '级': 'J', '激': 'J', '活': 'H', '注': 'Z', '册': 'C', '绑': 'B', '定': 'D', '解': 'J',
  '绑': 'B', '验': 'Y', '证': 'Z', '校': 'J', '验': 'Y', '审': 'S', '核': 'H', '批': 'P', '准': 'Z', '拒': 'J',
  '绝': 'J', '通': 'T', '过': 'G', '待': 'D', '处': 'C', '理': 'L', '已': 'Y', '未': 'W', '完': 'W', '成': 'C',
  '进': 'J', '行': 'X', '延': 'Y', '期': 'Q', '过': 'G', '期': 'Q', '逾': 'Y', '临': 'L', '即': 'J', '将': 'J',
  '马': 'M', '上': 'S', '立': 'L', '刻': 'K', '最': 'Z', '近': 'J', '今': 'J', '明': 'M', '昨': 'Z', '前': 'Q',
  '后': 'H', '早': 'Z', '晚': 'W', '上': 'S', '午': 'W', '下': 'X', '中': 'Z', '半': 'B', '整': 'Z', '每': 'M',
  '隔': 'G', '周': 'Z', '月': 'Y', '季': 'J', '年': 'N', '历': 'L', '史': 'S', '统': 'T', '计': 'J', '分': 'F',
  '布': 'B', '占': 'Z', '比': 'B', '率': 'L', '增': 'Z', '长': 'Z', '降': 'J', '跌': 'D', '幅': 'F', '度': 'D',
  '总': 'Z', '计': 'J', '合': 'H', '平': 'P', '均': 'J', '最': 'Z', '大': 'D', '小': 'X', '多': 'D', '少': 'S',
  '高': 'G', '低': 'D', '快': 'K', '慢': 'M', '好': 'H', '坏': 'H', '优': 'Y', '良': 'L', '差': 'C', '合': 'H',
  '格': 'G', '不': 'B', '未': 'W', '已': 'Y', '正': 'Z', '常': 'C', '异': 'Y', '警': 'J', '告': 'G', '提': 'T',
  '醒': 'X', '注': 'Z', '意': 'Y', '危': 'W', '险': 'X', '错': 'C', '误': 'W', '失': 'S', '败': 'B', '成': 'C',
  '功': 'G', '胜': 'S', '利': 'L', '败': 'B', '输': 'S', '赢': 'Y', '得': 'D', '失': 'S', '收': 'S', '获': 'H',
  '付': 'F', '出': 'C', '投': 'T', '入': 'R', '产': 'C', '出': 'C', '效': 'X', '率': 'L', '果': 'G', '绩': 'J',
  '效': 'X', '质': 'Z', '量': 'L', '数': 'S', '量': 'L', '规': 'G', '模': 'M', '范': 'F', '围': 'W', '领': 'L',
  '域': 'Y', '行': 'H', '业': 'Y', '专': 'Z', '业': 'Y', '技': 'J', '术': 'S', '能': 'N', '力': 'L', '经': 'J',
  '验': 'Y', '水': 'S', '平': 'P', '层': 'C', '次': 'C', '等': 'D', '级': 'J', '阶': 'J', '段': 'D', '状': 'Z',
  '态': 'T', '情': 'Q', '况': 'K', '条': 'T', '件': 'J', '环': 'H', '境': 'J', '背': 'B', '景': 'J', '前': 'Q',
  '景': 'J', '目': 'M', '标': 'B', '目': 'M', '的': 'D', '意': 'Y', '义': 'Y', '价': 'J', '值': 'Z', '观': 'G',
  '点': 'D', '看': 'K', '法': 'F', '建': 'J', '议': 'Y', '意': 'Y', '见': 'J', '反': 'F', '馈': 'K', '评': 'P',
  '论': 'L', '回': 'H', '复': 'F', '答': 'D', '应': 'Y', '响': 'X', '反': 'F', '映': 'Y', '表': 'B', '现': 'X',
  '显': 'X', '示': 'S', '展': 'Z', '示': 'S', '呈': 'C', '现': 'X', '出': 'C', '现': 'X', '发': 'F', '生': 'S',
  '产': 'C', '生': 'S', '引': 'Y', '起': 'Q', '导': 'D', '致': 'Z', '造': 'Z', '成': 'C', '形': 'X', '成': 'C',
  '变': 'B', '化': 'H', '转': 'Z', '换': 'H', '改': 'G', '变': 'B', '更': 'G', '替': 'T', '代': 'D', '替': 'T',
  '换': 'H', '交': 'J', '替': 'T', '轮': 'L', '流': 'L', '循': 'X', '环': 'H', '周': 'Z', '期': 'Q', '阶': 'J',
  '段': 'D', '步': 'B', '骤': 'Z', '流': 'L', '程': 'C', '程': 'C', '序': 'X', '顺': 'S', '序': 'X', '次': 'C',
  '第': 'D', '先': 'X', '后': 'H', '优': 'Y', '先': 'X', '紧': 'J', '急': 'J', '重': 'Z', '要': 'Y', '次': 'C',
  '轻': 'Q', '缓': 'H', '慢': 'M', '急': 'J', '速': 'S', '快': 'K', '迅': 'X', '速': 'S', '立': 'L', '即': 'J',
  '马': 'M', '上': 'S', '及': 'J', '时': 'S', '准': 'Z', '时': 'S', '守': 'S', '时': 'S', '按': 'A', '时': 'S',
  '延': 'Y', '迟': 'C', '耽': 'D', '误': 'W', '拖': 'T', '延': 'Y', '缓': 'H', '慢': 'M', '停': 'T', '滞': 'Z',
  '卡': 'K', '顿': 'D', '缓': 'H', '冲': 'C', '加': 'J', '载': 'Z', '读': 'D', '取': 'Q', '写': 'X', '入': 'R',
  '存': 'C', '储': 'C', '保': 'B', '存': 'C', '缓': 'H', '存': 'C', '清': 'Q', '除': 'C', '删': 'S', '除': 'C',
  '移': 'Y', '除': 'C', '去': 'Q', '掉': 'D', '丢': 'D', '失': 'S', '遗': 'Y', '失': 'S', '忘': 'W', '记': 'J',
  '回': 'H', '忆': 'Y', '想': 'X', '起': 'Q', '记': 'J', '录': 'L', '记': 'J', '载': 'Z', '登': 'D', '记': 'J',
  '注': 'Z', '册': 'C', '备': 'B', '案': 'A', '存': 'C', '档': 'D', '归': 'G', '档': 'D', '入': 'R', '库': 'K'
}

// 获取汉字的拼音首字母
function getPinyinInitial(char) {
  return pinyinMap[char] || char.toUpperCase()
}

// 将字符串转换为拼音首字母
export function getPinyinInitials(str) {
  if (!str) return ''
  let initials = ''
  for (let char of str) {
    initials += getPinyinInitial(char)
  }
  return initials
}

// 检查字符串是否匹配拼音首字母
export function matchPinyin(str, query) {
  if (!str || !query) return false
  const initials = getPinyinInitials(str)
  return initials.toLowerCase().includes(query.toLowerCase())
}

// 搜索时同时匹配中文和拼音
export function searchWithPinyin(items, query, fields = ['label']) {
  if (!query.trim()) return []
  
  const lowerQuery = query.toLowerCase()
  
  return items.filter(item => {
    // 检查每个字段
    for (const field of fields) {
      const value = item[field]
      if (!value) continue
      
      const lowerValue = value.toLowerCase()
      
      // 直接匹配
      if (lowerValue.includes(lowerQuery)) {
        return true
      }
      
      // 拼音首字母匹配
      if (matchPinyin(value, query)) {
        return true
      }
    }
    return false
  })
}

export default {
  getPinyinInitials,
  matchPinyin,
  searchWithPinyin
}
